var httpApiToken=(new Date).getTime(),host="",httpApiUrl="",xhr=new XMLHttpRequest;xhr.withCredentials="true";var httpApi=function(a){host=a,httpApiUrl=host+"/api/"},onloadFunction=function(a,b,c){var d=a.target.responseText;if(d=JSON.parse(d),"SUCCESS"==d.result)if(d.data){var e=(new Base64).decode(d.data);b(JSON.parse(e))}else b({result:"SUCCESS"});else c(d)},reqFailed=function(a){return new Promise(function(b,c){c(a)})};httpApi.prototype.downloadCenter=function(){return new Promise(function(a,b){xhr.onload=function(b){if(200===this.status){var c=b.target.responseText;c=JSON.parse(c),a(c)}},xhr.onerror=function(a){b(a)},xhr.open("GET",host+"/download-center.json"),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.login=function(a,b){var c={};if(!a)return reqFailed({result:"FAILED",data:(new Base64).encode("username is null")});if(c.username=a,!b)return reqFailed({result:"FAILED",data:(new Base64).encode("password is null")});c.password=b;var d=new FormData;return d.append("para",(new Base64).encode(JSON.stringify(c))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"login"),xhr.setRequestHeader("token",httpApiToken),xhr.send(d)})},httpApi.prototype.loadOcxInfo=function(a){return null==a?reqFailed({result:"FAILED",data:(new Base64).encode("username is null")}):new Promise(function(b,c){xhr.onload=function(a){200===this.status?onloadFunction(a,b,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"ocx/"+a),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.logout=function(){return new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"logout"),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.queryMenu=function(){return new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"menu/client"),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.queryRole=function(a){return new Promise(function(b,c){xhr.onload=function(a){200===this.status?onloadFunction(a,b,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"role"+(a?"/"+a:"")),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.fuzzyQueryRole=function(a,b,c){var d={};a&&(d.fuzzy=a),b&&(d.page=b),c&&(d.limit=c);var e=new FormData;return e.append("para",(new Base64).encode(JSON.stringify(d))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"roleFuzzy"),xhr.setRequestHeader("token",httpApiToken),xhr.send(e)})},httpApi.prototype.queryAuthorization=function(){return new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"authorization"),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.saveRoleAction=function(a){var b=new FormData;return b.append("para",(new Base64).encode(JSON.stringify(a))),new Promise(function(a,c){xhr.onload=function(b){200===this.status?onloadFunction(b,a,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"roleActionSave"),xhr.setRequestHeader("token",httpApiToken),xhr.send(b)})},httpApi.prototype.changePassword=function(a,b,c){var d={};if(!a)return reqFailed({result:"FAILED",data:(new Base64).encode("oldPassword is null")});if(d.oldPassword=a,!b)return reqFailed({result:"FAILED",data:(new Base64).encode("newPassword is null")});if(d.newPassword=b,!c)return reqFailed({result:"FAILED",data:(new Base64).encode("confirmPassword is null")});d.confirmPassword=c;var e=new FormData;return e.append("para",(new Base64).encode(JSON.stringify(d))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"changePassword"),xhr.setRequestHeader("token",httpApiToken),xhr.send(e)})},httpApi.prototype.fuzzyQuerySystemUser=function(a,b,c,d){var e={};a&&(e.fuzzy=a),b&&(e.departmentId=b),c&&(e.page=c),d&&(e.limit=d);var f=new FormData;return f.append("para",(new Base64).encode(JSON.stringify(e))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"systemUserFuzzy"),xhr.setRequestHeader("token",httpApiToken),xhr.send(f)})},httpApi.prototype.saveSystemUser=function(a,b,c,d,e,f){var g={};if(a&&(g.id=a),!b)return reqFailed({result:"FAILED",data:(new Base64).encode("username is null")});if(g.username=b,!c)return reqFailed({result:"FAILED",data:(new Base64).encode("password is null")});if(g.password=c,!e)return reqFailed({result:"FAILED",data:(new Base64).encode("roleId is null")});if(g.roleid=e,!f)return reqFailed({result:"FAILED",data:(new Base64).encode("departmentId is null")});g.deptid=f,d&&(g.fullname=d);var h=new FormData;return h.append("para",(new Base64).encode(JSON.stringify(g))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"systemUserSave"),xhr.setRequestHeader("token",httpApiToken),xhr.send(h)})},httpApi.prototype.removeSystemUser=function(a){if(null==a)return reqFailed({result:"FAILED",data:(new Base64).encode("id is null")});var b=new FormData;return b.append("para",(new Base64).encode(JSON.stringify({id:a}))),new Promise(function(a,c){xhr.onload=function(b){200===this.status?onloadFunction(b,a,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"systemUserRemove"),xhr.setRequestHeader("token",httpApiToken),xhr.send(b)})},httpApi.prototype.queryDepartment=function(a){return new Promise(function(b,c){xhr.onload=function(a){200===this.status?onloadFunction(a,b,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"department"+(a?"/"+a:"")),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.fuzzyQueryDepartment=function(a,b,c){var d={};a&&(d.fuzzy=a),b&&(d.page=b),c&&(d.limit=c);var e=new FormData;return e.append("para",(new Base64).encode(JSON.stringify(d))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"departmentFuzzy"),xhr.setRequestHeader("token",httpApiToken),xhr.send(e)})},httpApi.prototype.saveDepartment=function(a,b,c,d,e,f,g,h){var i={};if(a&&(i.id=a),!b)return reqFailed({result:"FAILED",data:(new Base64).encode("departmentName is null")});if(i.dept_name=b,!e)return reqFailed({result:"FAILED",data:(new Base64).encode("parentId is null")});i.parentid=e,c&&(i.director=c),d&&(i.remarks=d),f&&(i.dkey=f),g&&(i.valid_time=g),h&&(i.member=h);var j=new FormData;return j.append("para",(new Base64).encode(JSON.stringify(i))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"departmentSave"),xhr.setRequestHeader("token",httpApiToken),xhr.send(j)})},httpApi.prototype.removeDepartment=function(a){if(null==a)return reqFailed({result:"FAILED",data:(new Base64).encode("id is null")});var b=new FormData;return b.append("para",(new Base64).encode(JSON.stringify({id:a}))),new Promise(function(a,c){xhr.onload=function(b){200===this.status?onloadFunction(b,a,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"departmentRemove"),xhr.setRequestHeader("token",httpApiToken),xhr.send(b)})},httpApi.prototype.queryPerson=function(a){return null==a?reqFailed({result:"FAILED",data:(new Base64).encode("id is null")}):new Promise(function(b,c){xhr.onload=function(a){200===this.status?onloadFunction(a,b,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"person/"+a),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.fuzzyQueryPerson=function(a,b,c,d){var e={};a&&(e.fuzzy=a),b&&(e.departmentId=b),c&&(e.page=c),d&&(e.limit=d);var f=new FormData;return f.append("para",(new Base64).encode(JSON.stringify(e))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"personFuzzy"),xhr.setRequestHeader("token",httpApiToken),xhr.send(f)})},httpApi.prototype.savePerson=function(a,b,c,d,e){var f={};if(a&&(f.id=a),!b)return reqFailed({result:"FAILED",data:(new Base64).encode("pno is null")});if(f.pno=b,!c)return reqFailed({result:"FAILED",data:(new Base64).encode("name is null")});if(f.name=c,!d)return reqFailed({result:"FAILED",data:(new Base64).encode("departmentId is null")});if(f.deptid=d,!e)return reqFailed({result:"FAILED",data:(new Base64).encode("dkey is null")});f.dkey=e;var g=new FormData;return g.append("para",(new Base64).encode(JSON.stringify(f))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"personSave"),xhr.setRequestHeader("token",httpApiToken),xhr.send(g)})},httpApi.prototype.removePerson=function(a,b,c){if(null==a)return reqFailed({result:"FAILED",data:(new Base64).encode("id is null")});if(null==b)return reqFailed({result:"FAILED",data:(new Base64).encode("pno is null")});if(null==c)return reqFailed({result:"FAILED",data:(new Base64).encode("dkey is null")});var d={id:a,pno:b,dkey:c},e=new FormData;return e.append("para",(new Base64).encode(JSON.stringify(d))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"personRemove"),xhr.setRequestHeader("token",httpApiToken),xhr.send(e)})},httpApi.prototype.fuzzyQueryArea=function(a,b,c,d){var e={};a&&(e.fuzzy=a),b&&(e.departmentId=b),c&&(e.page=c),d&&(e.limit=d);var f=new FormData;return f.append("para",(new Base64).encode(JSON.stringify(e))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"areaFuzzy"),xhr.setRequestHeader("token",httpApiToken),xhr.send(f)})},httpApi.prototype.saveArea=function(a,b,c,d,e,f,g){var h={};if(a&&(h.id=a),!b)return reqFailed({result:"FAILED",data:(new Base64).encode("name is null")});if(h.name=b,!c)return reqFailed({result:"FAILED",data:(new Base64).encode("departmentId is null")});if(h.deptid=c,!d)return reqFailed({result:"FAILED",data:(new Base64).encode("dkey is null")});if(h.dkey=d,!e)return reqFailed({result:"FAILED",data:(new Base64).encode("lon is null")});if(h.centerlon=e,!f)return reqFailed({result:"FAILED",data:(new Base64).encode("la is null")});if(h.centerla=f,!g)return reqFailed({result:"FAILED",data:(new Base64).encode("zoomLevel is null")});h.zoomlevel=g;var i=new FormData;return i.append("para",(new Base64).encode(JSON.stringify(h))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"areaSave"),xhr.setRequestHeader("token",httpApiToken),xhr.send(i)})},httpApi.prototype.removeArea=function(a){if(null==a)return reqFailed({result:"FAILED",data:(new Base64).encode("id is null")});var b=new FormData;return b.append("para",(new Base64).encode(JSON.stringify({id:a}))),new Promise(function(a,c){xhr.onload=function(b){200===this.status?onloadFunction(b,a,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"areaRemove"),xhr.setRequestHeader("token",httpApiToken),xhr.send(b)})},httpApi.prototype.queryFence=function(a){return null==a?reqFailed({result:"FAILED",data:(new Base64).encode("id is null")}):new Promise(function(b,c){xhr.onload=function(a){200===this.status?onloadFunction(a,b,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"fence/"+a),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.fuzzyQueryFence=function(a,b,c,d){var e={};a&&(e.fuzzy=a),b&&(e.departmentId=b),c&&(e.page=c),d&&(e.limit=d);var f=new FormData;return f.append("para",(new Base64).encode(JSON.stringify(e))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"fenceFuzzy"),xhr.setRequestHeader("token",httpApiToken),xhr.send(f)})},httpApi.prototype.saveFence=function(a,b,c,d,e,f,g,h,i,j,k){var l={};if(a&&(l.id=a),!b)return reqFailed({result:"FAILED",data:(new Base64).encode("name is null")});if(l.name=b,!c)return reqFailed({result:"FAILED",data:(new Base64).encode("departmentId is null")});if(l.deptid=c,!d)return reqFailed({result:"FAILED",data:(new Base64).encode("dkey is null")});if(l.dkey=d,!e)return reqFailed({result:"FAILED",data:(new Base64).encode("topRightLon is null")});if(l.trlon=e,!f)return reqFailed({result:"FAILED",data:(new Base64).encode("topRightLa is null")});if(l.trla=f,!g)return reqFailed({result:"FAILED",data:(new Base64).encode("topRightLon is null")});if(l.dllon=g,!h)return reqFailed({result:"FAILED",data:(new Base64).encode("topRightLa is null")});if(l.dlla=h,!j)return reqFailed({result:"FAILED",data:(new Base64).encode("zoomLevel is null")});l.zoomlevel=j,i&&(l.pnos=i),k&&(l.isused=k);var m=new FormData;return m.append("para",(new Base64).encode(JSON.stringify(l))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"fenceSave"),xhr.setRequestHeader("token",httpApiToken),xhr.send(m)})},httpApi.prototype.removeFence=function(a){if(null==a)return reqFailed({result:"FAILED",data:(new Base64).encode("id is null")});var b=new FormData;return b.append("para",(new Base64).encode(JSON.stringify({id:a}))),new Promise(function(a,c){xhr.onload=function(b){200===this.status?onloadFunction(b,a,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"fenceRemove"),xhr.setRequestHeader("token",httpApiToken),xhr.send(b)})},httpApi.prototype.queryNotice=function(){return new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"notice"),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.saveNotice=function(a,b,c,d,e){var f={};if(a&&(f.id=a),!b)return reqFailed({result:"FAILED",data:(new Base64).encode("title is null")});if(f.title=b,c&&(f.url=c),!d)return reqFailed({result:"FAILED",data:(new Base64).encode("departmentId is null")});if(f.deptId=d,!e)return reqFailed({result:"FAILED",data:(new Base64).encode("createMan is null")});f.createMan=e;var g=new FormData;return g.append("para",(new Base64).encode(JSON.stringify(f))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"noticeSave"),xhr.setRequestHeader("token",httpApiToken),xhr.send(g)})},httpApi.prototype.removeNotice=function(a){if(null==a)return reqFailed({result:"FAILED",data:(new Base64).encode("id is null")});var b=new FormData;return b.append("para",(new Base64).encode(JSON.stringify({id:a}))),new Promise(function(a,c){xhr.onload=function(b){200===this.status?onloadFunction(b,a,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"noticeRemove"),xhr.setRequestHeader("token",httpApiToken),xhr.send(b)})},httpApi.prototype.fuzzyQueryLog=function(a,b,c,d,e){var f={};if(a&&(f.fuzzy=a),!b)return reqFailed({result:"FAILED",data:(new Base64).encode("beginDate is null")});if(f.beginDate=b,!c)return reqFailed({result:"FAILED",data:(new Base64).encode("endDate is null")});f.endDate=c,d&&(f.page=d),e&&(f.limit=e);var g=new FormData;return g.append("para",(new Base64).encode(JSON.stringify(f))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"logFuzzy"),xhr.setRequestHeader("token",httpApiToken),xhr.send(g)})},httpApi.prototype.exportLog=function(a,b,c){var d={};return a&&(d.fuzzy=a),b?(d.beginDate=b,c?(d.endDate=c,void(window.location.href=httpApiUrl+"exportLog?para="+(new Base64).encode(JSON.stringify(d)))):reqFailed({result:"FAILED",data:(new Base64).encode("endDate is null")})):reqFailed({result:"FAILED",data:(new Base64).encode("beginDate is null")})},httpApi.prototype.queryTrackInfo=function(a,b,c,d){var e={};if(null==a)return reqFailed({result:"FAILED",data:(new Base64).encode("pno is null")});if(e.pno=a,null==b)return reqFailed({result:"FAILED",data:(new Base64).encode("dkey is null")});if(e.dkey=b,null==c)return reqFailed({result:"FAILED",data:(new Base64).encode("beginDate is null")});if(e.beginDate=c,null==d)return reqFailed({result:"FAILED",data:(new Base64).encode("endDate is null")});e.endDate=d;var f=new FormData;return f.append("para",(new Base64).encode(JSON.stringify([e]))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"trackInfoFuzzy"),xhr.setRequestHeader("token",httpApiToken),xhr.send(f)})},httpApi.prototype.queryTerminal=function(a){return null==a?reqFailed({result:"FAILED",data:(new Base64).encode("id is null")}):new Promise(function(b,c){xhr.onload=function(a){200===this.status?onloadFunction(a,b,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"loadAdinfo/"+a),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.fuzzyQueryTerminal=function(a,b,c,d,e){var f={};a&&(f.pno=a),b&&(f.fuzzy=b),c&&(f.departmentId=c),d&&(f.page=d),e&&(f.limit=e);var g=new FormData;return g.append("para",(new Base64).encode(JSON.stringify(f))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"adinfoViewsFuzzy"),xhr.setRequestHeader("token",httpApiToken),xhr.send(g)})},httpApi.prototype.queryWarning=function(a,b){var c={};a&&(c.page=a),b&&(c.limit=b);var d=new FormData;return d.append("para",(new Base64).encode(JSON.stringify(c))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"warning"),xhr.setRequestHeader("token",httpApiToken),xhr.send(d)})},httpApi.prototype.checkWarning=function(a){var b=new FormData;return b.append("para",(new Base64).encode(JSON.stringify(a))),new Promise(function(a,c){xhr.onload=function(b){200===this.status?onloadFunction(b,a,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"checkWarning"),xhr.setRequestHeader("token",httpApiToken),xhr.send(b)})},httpApi.prototype.delayDepartmentValidTime=function(a,b){var c=new FormData;return c.append("para",(new Base64).encode(JSON.stringify({id:a,valid_time:b}))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"delayDepartmentValidTime"),xhr.setRequestHeader("token",httpApiToken),xhr.send(c)})},httpApi.prototype.loadTerminalConfig=function(){return new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"interval"),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.saveTerminalConfig=function(a,b,c,d){var e=new FormData;return e.append("para",(new Base64).encode(JSON.stringify([a,b,c,d]))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"intervalSave"),xhr.setRequestHeader("token",httpApiToken),xhr.send(e)})},httpApi.prototype.loadHisData=function(a,b,c,d,e,f,g,h){var i={};if(null==a)return reqFailed({result:"FAILED",data:(new Base64).encode("type is null")});b&&(i.pno=b),c&&(i.departmentId=c),d&&(i.fileType=d),e&&(i.beginDate=e),f&&(i.endDate=f),g&&(i.page=g),h&&(i.limit=h);var j=new FormData;return j.append("para",(new Base64).encode(JSON.stringify(i))),new Promise(function(b,c){xhr.onload=function(a){200===this.status?onloadFunction(a,b,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"tpsHisData/"+a),xhr.setRequestHeader("token",httpApiToken),xhr.send(j)})},httpApi.prototype.fuzzyQueryDefaultChannel=function(a,b,c){var d={};a&&(d.fuzzy=a),b&&(d.page=b),c&&(d.limit=c);var e=new FormData;return e.append("para",(new Base64).encode(JSON.stringify(d))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"defaultChannelFuzzy"),xhr.setRequestHeader("token",httpApiToken),xhr.send(e)})},httpApi.prototype.fuzzyQueryTempChannel=function(a,b,c){var d={};a&&(d.fuzzy=a),b&&(d.page=b),c&&(d.limit=c);var e=new FormData;return e.append("para",(new Base64).encode(JSON.stringify(d))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"tempChannelFuzzy"),xhr.setRequestHeader("token",httpApiToken),xhr.send(e)})},httpApi.prototype.queryChannelInfo=function(a,b){var c={};if(null==a)return reqFailed({result:"FAILED",data:(new Base64).encode("channelId is null")});if(c.channelId=a,null==b)return reqFailed({result:"FAILED",data:(new Base64).encode("type is null")});c.type=b;var d=new FormData;return d.append("para",(new Base64).encode(JSON.stringify(c))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"channelInfos"),xhr.setRequestHeader("token",httpApiToken),xhr.send(d)})},httpApi.prototype.saveTempChannel=function(a,b,c,d,e){var f={};if(a&&(f.id=a),!b)return reqFailed({result:"FAILED",data:(new Base64).encode("departmentId is null")});if(f.deptid=b,c&&(f.channelid=c),!d)return reqFailed({result:"FAILED",data:(new Base64).encode("channelName is null")});f.channelName=d,e&&(f.creatorid=e);var g=new FormData;return g.append("para",(new Base64).encode(JSON.stringify(f))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"tempChannelSave"),xhr.setRequestHeader("token",httpApiToken),xhr.send(g)})},httpApi.prototype.removeTempChannel=function(a){var b={};if(!a)return reqFailed({result:"FAILED",data:(new Base64).encode("channelId is null")});b.channelid=a;var c=new FormData;return c.append("para",(new Base64).encode(JSON.stringify(b))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"tempChannelRemove"),xhr.setRequestHeader("token",httpApiToken),xhr.send(c)})},httpApi.prototype.generateChannelRela=function(a,b){if(null==a)return reqFailed({result:"FAILED",data:(new Base64).encode("channelId is null")});if(null==b||0==b.length)return reqFailed({result:"FAILED",data:(new Base64).encode("terminalList is null")});var c=new FormData;return c.append("para",(new Base64).encode(JSON.stringify(b))),new Promise(function(b,d){xhr.onload=function(a){200===this.status?onloadFunction(a,b,d):d(this.status)},xhr.onerror=function(a){d(a)},xhr.open("POST",httpApiUrl+"generateTempChannelRela/"+a),xhr.setRequestHeader("token",httpApiToken),xhr.send(c)})},httpApi.prototype.removeChannelRela=function(a,b){if(null==a)return reqFailed({result:"FAILED",data:(new Base64).encode("channelId is null")});if(null==b||0==b.length)return reqFailed({result:"FAILED",data:(new Base64).encode("terminalList is null")});var c=new FormData;return c.append("para",(new Base64).encode(JSON.stringify(b))),new Promise(function(b,d){xhr.onload=function(a){200===this.status?onloadFunction(a,b,d):d(this.status)},xhr.onerror=function(a){d(a)},xhr.open("POST",httpApiUrl+"removeTempChannelRela/"+a),xhr.setRequestHeader("token",httpApiToken),xhr.send(c)})},httpApi.prototype.dispatchPttInfo=function(a,b){if(null==a)return reqFailed({result:"FAILED",data:(new Base64).encode("channelId is null")});if(null==b||0==b.length)return reqFailed({result:"FAILED",data:(new Base64).encode("terminalList is null")});var c=new FormData;return c.append("para",(new Base64).encode(JSON.stringify(b))),new Promise(function(b,d){xhr.onload=function(a){200===this.status?onloadFunction(a,b,d):d(this.status)},xhr.onerror=function(a){d(a)},xhr.open("POST",httpApiUrl+"dispatchPttInfo/"+a),xhr.setRequestHeader("token",httpApiToken),xhr.send(c)})},httpApi.prototype.queryCtrlInfo=function(a){return new Promise(function(b,c){xhr.onload=function(a){200===this.status?onloadFunction(a,b,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"ctrlInfo"+(a?"/"+a:"")),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.recordVideo=function(a,b,c){var d={};return a?(d.sn=a,c?(d.status=c,b?(d.icid=b,new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"recordVideo"),xhr.setRequestHeader("token",httpApiToken),xhr.send()})):reqFailed({result:"FAILED",data:(new Base64).encode("icid is null")})):reqFailed({result:"FAILED",data:(new Base64).encode("status is null")})):reqFailed({result:"FAILED",data:(new Base64).encode("sn is null")})},httpApi.prototype.remotePhoto=function(a){var b={};return a?(b.sn=a,new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"remotePhoto"),xhr.setRequestHeader("token",httpApiToken),xhr.send()})):reqFailed({result:"FAILED",data:(new Base64).encode("sn is null")})},httpApi.prototype.fuzzyQueryCtrlInfo=function(a,b,c,d){var e={};a&&(e.fuzzy=a),b&&(e.departmentId=b),c&&(e.page=c),d&&(e.limit=d);var f=new FormData;return f.append("para",(new Base64).encode(JSON.stringify(e))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"ctrlInfoFuzzy"),xhr.setRequestHeader("token",httpApiToken),xhr.send(f)})},httpApi.prototype.saveCtrlInfo=function(a,b,c,d,e,f,g,h,i){var j={};if(b&&(j.id=b),!c)return reqFailed({result:"FAILED",data:(new Base64).encode("title is null")});if(j.title=c,!d)return reqFailed({result:"FAILED",data:(new Base64).encode("comment is null")});if(j.comment=d,e)j.linkUrl=e;else if(null!=a&&null==e)return reqFailed({result:"FAILED",data:(new Base64).encode("linkUrl is null")});if(f)j.imgUrl=f;else if(null!=a&&null==f)return reqFailed({result:"FAILED",data:(new Base64).encode("imgUrl is null")});if(!g)return reqFailed({result:"FAILED",data:(new Base64).encode("departmentId is null")});j.deptId=g,h&&(j.createMan=h),i&&(j.createTime=i);var k=new FormData;k.append("para",(new Base64).encode(JSON.stringify(j)));var l=httpApiUrl;return null==a?l+="ctrlInfoSave":(l+="imgCtrlInfoSave",k.append("file",a)),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",l),xhr.setRequestHeader("token",httpApiToken),xhr.send(k)})},httpApi.prototype.removeCtrlInfo=function(a){if(null==a)return reqFailed({result:"FAILED",data:(new Base64).encode("id is null")});var b=new FormData;return b.append("para",(new Base64).encode(JSON.stringify({id:a}))),new Promise(function(a,c){xhr.onload=function(b){200===this.status?onloadFunction(b,a,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"ctrlInfoRemove"),xhr.setRequestHeader("token",httpApiToken),xhr.send(b)})},httpApi.prototype.queryCtrlTarget=function(a){return null==a?reqFailed({result:"FAILED",data:(new Base64).encode("id is null")}):new Promise(function(b,c){xhr.onload=function(a){200===this.status?onloadFunction(a,b,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"ctrlTarget/"+a),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.sendRemoteMessage=function(a,b,c,d,e,f,g){var h={};if(!a)return reqFailed({result:"FAILED",data:(new Base64).encode("id is null")});if(h.id=a,!b)return reqFailed({result:"FAILED",data:(new Base64).encode("deptId is null")});if(h.deptId=b,!(g&&g.length>0))return reqFailed({result:"FAILED",data:(new Base64).encode("terminalList is null")});h.terminalList=g;var i=new FormData;return i.append("para",(new Base64).encode(JSON.stringify(h))),new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"sendRemoteMessage"),xhr.setRequestHeader("token",httpApiToken),xhr.send(i)})},httpApi.prototype.loadRom=function(){return new Promise(function(a,b){xhr.onload=function(c){200===this.status?onloadFunction(c,a,b):b(this.status)},xhr.onerror=function(a){b(a)},xhr.open("POST",httpApiUrl+"rom"),xhr.setRequestHeader("token",httpApiToken),xhr.send()})},httpApi.prototype.dispatchUpgrade=function(a,b,c,d,e,f){if(null==a)return reqFailed({result:"FAILED",data:(new Base64).encode("departmentId is null")});var g={};if(!b)return reqFailed({result:"FAILED",data:(new Base64).encode("remark is null")});if(g.remark=b,!c)return reqFailed({result:"FAILED",data:(new Base64).encode("hashVal is null")});if(g.hashVal=c,!d)return reqFailed({result:"FAILED",data:(new Base64).encode("fileSize is null")});if(g.fileSize=d,!e)return reqFailed({result:"FAILED",data:(new Base64).encode("romId is null")});if(g.romId=e,!f)return reqFailed({result:"FAILED",data:(new Base64).encode("downloadUrl is null")});g.downloadUrl=f;var h=new FormData;return h.append("para",(new Base64).encode(JSON.stringify(g))),new Promise(function(b,c){xhr.onload=function(a){200===this.status?onloadFunction(a,b,c):c(this.status)},xhr.onerror=function(a){c(a)},xhr.open("POST",httpApiUrl+"dispatchUpgrade/"+a),xhr.setRequestHeader("token",httpApiToken),xhr.send(h)})};var ocxService=function(a){this.ocx=a,this.initOcx=0,this.TVideoCall=1,this.TAudioCall=2,this.TVideoSee=3,this.TAudioSee=4,this.TSilence=5,this.TDesilence=6,this.TMute=7,this.TDemute=8,this.TVideoRecordB=9,this.TVideoRecordE=10,this.TPicture=11,this.TCloseTer=12,this.TGetTers=13,this.TSetScreen=14,this.TGetScreen=15,this.TSetPath=16,this.TGetPath=17,this.TSetSplitRecordTime=18,this.TGetSplitRecordTime=19,this.TVideoRecordBCJ=91};ocxService.prototype.registOcx=function(a,b,c,d,e){try{this.ocx=a;var f=JSON.stringify({server:d,uid:b,pname:c,displayame:e});this.ocx.object.AccountInitDir(f)}catch(g){}},ocxService.prototype.callStream=function(a,b){switch(a){case this.TVideoCall:var c={msgid:"call",uid:b.uid,pno:b.pno,call_type:"video"};void 0!=b.pname&&(c.pname=b.pname);var d=JSON.stringify(c);this.ocx.object.OCXSendMsg(d);break;case this.TAudioCall:var c={msgid:"call",uid:b.uid,pno:b.pno,call_type:"voice"};void 0!=b.pname&&(c.pname=b.pname);var d=JSON.stringify(c);this.ocx.object.OCXSendMsg(d)}},ocxService.prototype.loadConfig=function(a){try{return this.ocx.object.ReadConfig(a)}catch(b){}},ocxService.prototype.writeConfig=function(a,b){try{return this.ocx.object.WriteConfig(a,b)}catch(c){}};var pttOcxService=function(a){this.ocx=a,this.pttAddress,this.pttPort,this.pttId,this.pttName,this.priorityPc,this.pttflag};pttOcxService.prototype.registOcx=function(a,b,c,d,e,f,g,h,i,j){try{this.ocx=a,
this.pttAddress=b,this.pttPort=c,this.pttId=d,this.pttName=e,this.priorityPc=f-h>0?f-h:0,this.pttflag=g,this.deptId=i,this.dkey=j}catch(k){}},pttOcxService.prototype.startIntercome=function(a){try{var b={id:this.pttId,gid:a.gid,name:this.pttName,gname:a.gname,flag:this.pttflag+"",priority:this.priorityPc+"",dkey:void 0==this.dkey?"0":this.dkey,dpid:this.deptId+""},c=JSON.stringify(b);this.ocx.object.StartIntercome(this.pttAddress,this.pttPort,c)}catch(d){}},pttOcxService.prototype.stopIntercome=function(){try{this.ocx.object.StopIntercome()}catch(a){}},pttOcxService.prototype.changeGName=function(a){try{this.ocx.object.ChangeGName(a)}catch(b){}};var ws,subscribeAddress,subscribeId,topic,onRegistedCallbackFunc,onTerminalInfoCallbackFunc,onWarningInfoCallbackFunc,subscribeType={regist:0,warning:1,adinfo:2,task:3,taskcall:4,vehicle:5,health:6},onConnect=function(){ws.subscribe(topic,function(a){var b=JSON.parse(a.body);switch(b.type){case subscribeType.regist:onRegistedCallbackFunc&&onRegistedCallbackFunc("success");break;case subscribeType.adinfo:var c=JSON.parse(b.data);onTerminalInfoCallbackFunc&&onTerminalInfoCallbackFunc(c);break;case subscribeType.warning:var c=JSON.parse(b.data);onWarningInfoCallbackFunc&&onWarningInfoCallbackFunc(c)}})},onError=function(){try{(void 0!=ws||null!=ws)&&ws.disconnect(),setTimeout(function(){registWebSocket(subscribeAddress,subscribeId,onRegistedCallbackFunc,onTerminalInfoCallbackFunc,onWarningInfoCallbackFunc)},1e4)}catch(a){}},registWebSocket=function(a,b,c,d,e){subscribeAddress=a,subscribeId=b,onRegistedCallbackFunc=c,onTerminalInfoCallbackFunc=d,onWarningInfoCallbackFunc=e,ws=Stomp.client(a),topic="/topic/"+b,ws.connect("guest","guest",onConnect,onError)};